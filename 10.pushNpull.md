리모트 저장소와 통신하기
===
리모트 저장소에 내 작업내용을 반영할 수도 있고, 작업 내용을 내려받을 수도 있다.

업로드를 push라고 하며, 다운로드를 pull 이라고 한다.

리모트로 내려받은 브랜치는 리모트이름/브랜치이름 의 형식으로 지칭할 수 있다.

origin/master는 origin리모트의 master브랜치를 의미한다.

추적 브랜치, tracking branch
---
upstream 브랜치 라고도 부른다.

리모트 저장소도 로컬 저장소와 같은 구조 이므로 여러 브랜치가 존재할 수 있다.

리모트가 레포 단위로 연결된 개념이라면, 추척 브랜치는 브랜치 단위로 연결된 리모트라 할 수 있다.

로컬의 브랜치와 리모트의 브랜치를 연결하는 것을 브랜치를 추적한다고 표현한다.

로컬의 master는 origin/master 를 추적하고, 로컬의 develop은 origin/develop을 추적하는 형태로 구성해놓으면 편리한 점이 많다.

브랜치 추적하기
---
    git branch -u <remote>/<remote_branch>

현재 워킹 브랜치와 리모트의 특정 브랜치를 연결한다. -u 는 upstream을 의미하는 옵션이다.

master를 checkout한 상태에서

    git branch -u origin/master

명령으로 origin/master와 로컬의 master를 연결할 수 있다.

브랜치를 추적하면 이후에

    git status
와 같이 상태확인 메세지를 볼 때 추적브랜치와 로컬의 작업상황을 비교해준다. 단 실시간으로 통신해서 비교하는 것은 아니고 마지막으로 리모트에서 데이터를 받아온 시점과 비교한다.

추적 브랜치 확인하기
---
    git branch -vv
로컬에 존재하는 각 브랜치가 추적중인 브랜치를 표시한다. 그리고 추적 브랜치와 비교한 작업 상황도 알 수 있다.

fetch
---
    git fetch [<remote>]
fetch는 리모트에서 로컬로 내려받는 과정이다. 리모트에는 있지만 로컬에는 없는 데이터를 모두 내려받는다.

연결된 리모트가 하나밖에 없다면 remote는 생략할 수 있다.

fetch는 저장소에 데이터를 내려받지만, 워킹트리에는 영향이 없다. 워킹트리에 다운받은 데이터를 갱신하고 싶다면, 병합을 하거나, 해당 브랜치로 체크아웃하면 된다.

fetch후 병합하기
---
    git fetch
    git merge <remote>/<remote_branch>
추적 브랜치를 연결했다면

    git merge <remote>/<remote_branch>
는

    git merge @{u}
로 간단하게 대체할 수 있다. 그래서 추적 브랜치를 연결해두는 것이 실수를 방지하기에도 좋다. 자신이 현재 checkout중인 브랜치가 무엇인지 망각하고 다른 리모트 브랜치를 병합하는 사고가 종종 발생하기 때문이다.

pull
---
    git pull [<remote>]
추적브랜치를 연결한 경우 remote는 생략가능하다. 그리고 그것을 더 권장한다.

pull은 fetch와 병합을 한 번에 하는 기능이다. 편한 기능인 것은 맞지만, 잘못된 병합을 방지하려면 그냥 fetch와 merge를 나누는 것이 더 낫다. fetch는 남발해도 문제가 없지만, pull은 하기 전에 신중해야한다.

리모트브랜치를 checkout하기
---
    git checkout -b <new_barnch> <remote>/<remote_branch>
현재 로컬 작업상황은 그대로 두고, 리모트 브랜치의 작업을 그대로 체크아웃해서 새로운 브랜치를 만드는 작업이다. 로컬의 작업상황을 병합하기 전에 리모트 브랜치를 좀 더 살펴보고 싶을 때 활용하면 된다. 체크아웃 하기 전에 stash도 잊지 말자.

push
---
    git push [<remote>] [<branch>]
로컬 branch를 remote에 업로드(푸시)한다. branch를 생략하면 현재 checkout중인 브랜치를 push한다. 추적브랜치를 연결하면 remote와 branch를 생략하고

    git push
를 사용할 수 있다. 그리고 이것을 권장한다. 다른 브랜치에 push하는 실수를 방지하기에 좋다.

push 주의사항
---
원격저장소는 여럿이 공유하는 특성상, 내가 푸시하는 시점에 원격저장소가 최신상태여야 한다는 규칙이 있다. 내가 푸시하기 직전에 다른 누군가가 먼저 푸시하여 원격저장소의 내용이 달라졌다면, 푸시하기 전에 먼저 fetch -> merge를 한 후에 푸시해야한다.
